schemaVersion: 2.2.0
metadata:
  name: jbang-enabled-devspaces
  description: Dev Workspace with Java and JBang installed

components:
  - name: tools
    container:
      image: registry.redhat.io/devspaces/udi-rhel9@sha256:cca6cbf5adcb5ce83392795573fe258d468568bddc3ad3618297e9e6234cfb79
      memoryLimit: 2Gi
      cpuLimit: 1000m
      mountSources: true
      sourceMapping: /projects
      env:
        - name: PATH
          value: "/home/dev/.jbang/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
      volumeMounts:
        - name: jbang-home
          path: /home/dev/.jbang
  - name: jbang-home
    volume: {}

commands:
  - id: install-jbang
    exec:
      label: "Install JBang"
      component: tools
      workingDir: /home/dev
      commandLine: >
        bash -c "curl -Ls https://sh.jbang.dev | bash -s - app setup"
      group:
        kind: build
        isDefault: true

events:
  postStart:
    - install-jbang